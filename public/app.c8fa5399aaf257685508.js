webpackJsonp([0,3],{0:function(e,t,a){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}a(2),a(3),a(16);var n=a(17),l=_interopRequireDefault(n),r=a(46),u=_interopRequireDefault(r),o=a(179),i=_interopRequireDefault(o),s=document.createElement("div");s.id="app-root",s.className="full-width-height",document.body.appendChild(s),u["default"].render(l["default"].createElement(i["default"],null),s)},179:function(e,t,a){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(17),l=_interopRequireDefault(n),r=a(180),u=a(243),o=_interopRequireDefault(u),i=a(384),s=_interopRequireDefault(i),c=a(385),f=_interopRequireDefault(c),d=a(389),m=_interopRequireDefault(d),p=new o["default"]("b3Eo2rn8uwa4HwvnPyphOU4kzmIwfIej","elddev.eu.auth0.com"),h=function(e,t){p.loggedIn()&&t({pathname:"/"})},b=function(){return l["default"].createElement(r.Router,{history:r.browserHistory},l["default"].createElement(r.Route,{path:"/",component:s["default"],auth:p},l["default"].createElement(r.IndexRoute,{component:f["default"]}),l["default"].createElement(r.Route,{path:"/login",component:m["default"],onEnter:h}),l["default"].createElement(r.Route,{path:"#access_token=:token",component:m["default"]})))};t["default"]=b},243:function(e,t,a){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),l=a(244),r=_interopRequireDefault(l),u=a(180),o=function(){function AuthService(e,t){_classCallCheck(this,AuthService),this.lock=new r["default"](e,t,{}),this.lock.on("authenticated",this._doAuthentication.bind(this)),this.login=this.login.bind(this),this.loggedIn=this.loggedIn.bind(this)}return n(AuthService,[{key:"_doAuthentication",value:function(e){this.setToken(e.idToken),u.browserHistory.push("/")}},{key:"login",value:function(){this.lock.show()}},{key:"loggedIn",value:function(){return!!this.getToken()}},{key:"setToken",value:function(e){localStorage.setItem("id_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"logout",value:function(){localStorage.removeItem("id_token")}}]),AuthService}();t["default"]=o},384:function(e,t,a){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(17),l=_interopRequireDefault(n),r=function(e){var t=e.children,a=e.route,n=l["default"].cloneElement(t,{auth:a.auth});return l["default"].createElement("div",{className:"full-width-height skin-blue"},n)};r.propTypes={children:l["default"].PropTypes.element.isRequired,route:l["default"].PropTypes.object},t["default"]=r},385:function(e,t,a){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),l=a(17),r=_interopRequireDefault(l),u=a(180),o=a(386),i=_interopRequireDefault(o),s=a(243),c=_interopRequireDefault(s),f=a(388),d=_interopRequireDefault(f),m=function(e){switch(e.type){case"PERSON_ENTERED":return"Har ankommet Paradise-området.";case"PERSON_LEFT":return"Har forlatt Paradise-området.";default:return"Mangler beskrivelse"}},p=function(e){function Dashboard(e){_classCallCheck(this,Dashboard);var t=_possibleConstructorReturn(this,(Dashboard.__proto__||Object.getPrototypeOf(Dashboard)).call(this,e));return t.state={members:[],events:[],rpiVitals:{}},t.fetchMembers=t.fetchMembers.bind(t),t.fetchEvents=t.fetchEvents.bind(t),t.fetchAll=t.fetchAll.bind(t),t.fetchRpiVitals=t.fetchRpiVitals.bind(t),t}return _inherits(Dashboard,e),n(Dashboard,[{key:"componentDidMount",value:function(){this.fetchAll(),this.fetchIntervalId=setInterval(this.fetchAll,3e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.fetchIntervalId)}},{key:"setStatus",value:function(e,t){return e.map(function(e){var a=t.find(function(t){return t.subject===e.name});return a?Object.assign(e,{status:"PERSON_ENTERED"===a.type?"PRESENT":"AWAY"}):Object.assign(e,{status:"AWAY"})}),{members:e,events:t}}},{key:"fetchAll",value:function(){this.fetchMembers(),this.fetchEvents(),this.fetchRpiVitals()}},{key:"fetchMembers",value:function(){var e=this;fetch("https://paradise-backend.herokuapp.com/api/members").then(function(e){return e.json()}).then(function(t){return e.setStatus(t,e.state.events)}).then(function(t){return e.setState(t)})}},{key:"fetchEvents",value:function(){var e=this;fetch("https://paradise-backend.herokuapp.com/api/bluetooth-events").then(function(e){return e.json()}).then(function(e){return e.map(function(e){return Object.assign(e,{description:m(e),date:(0,i["default"])(e.date)})})}).then(function(e){return e.sort(function(e,t){return t.date-e.date})}).then(function(t){return e.setStatus(e.state.members,t)}).then(function(t){return e.setState(t)})}},{key:"fetchRpiVitals",value:function(){var e=this;fetch("https://paradise-backend.herokuapp.com/api/rpi-vitals").then(function(e){return e.json()}).then(function(t){return e.setState({rpiVitals:t})})["catch"](function(e){})}},{key:"render",value:function(){var e=this,t=function(){e.props.auth.logout(),e.props.router.push("/login")};return r["default"].createElement("div",{className:"wrapper"},r["default"].createElement("header",{className:"main-header"},r["default"].createElement("div",{className:"logo"},"Paradise Fantasy"),r["default"].createElement("nav",{className:"navbar"},r["default"].createElement("div",{className:"navbar-custom-menu"},r["default"].createElement("ul",{className:"nav navbar-nav"},r["default"].createElement("li",{className:"dropdown user user-menu"},r["default"].createElement("a",{href:"/",className:"dropdown-toggle","data-toggle":"dropdown"},r["default"].createElement("span",null,"Bruker")),r["default"].createElement("ul",{className:"dropdown-menu"},r["default"].createElement("li",{className:"user-footer"},r["default"].createElement("div",{className:"pull-right",onClick:t},"Logg ut")))))))),r["default"].createElement("aside",{className:"main-sidebar"},r["default"].createElement("section",{className:"sidebar"},r["default"].createElement("ul",{className:"sidebar-menu"},r["default"].createElement("li",{className:"header"},"HEADER"),r["default"].createElement("li",null,r["default"].createElement("a",{href:"/"},r["default"].createElement("i",{className:"fa fa-link"}),r["default"].createElement("span",null,"Link?")))))),r["default"].createElement("div",{className:"content-wrapper",style:{minHeight:"calc(100vh - 101px)"}},r["default"].createElement("section",{className:"content-header"},r["default"].createElement("h1",null,"Dashboard",r["default"].createElement("small",null,"Version 0.1"))),r["default"].createElement("section",{className:"content"},r["default"].createElement("div",{className:"row"},r["default"].createElement(d["default"],{color:"bg-aqua",icon:"ion ion-gear-a",title:"CPU TRAFFIC",content:this.state.rpiVitals.load||"not found"}),r["default"].createElement(d["default"],{color:"bg-red",icon:"glyphicon glyphicon-fire",title:"Temperature",content:this.state.rpiVitals.temperature||"not found"}),r["default"].createElement(d["default"],{color:"bg-green",icon:"glyphicon glyphicon-oil",title:"Memory Usage",content:(this.state.rpiVitals.mem_avail/this.state.rpiVitals.mem_total*100).toFixed(1)+"%"||"not found"}),r["default"].createElement(d["default"],{color:"bg-yellow",icon:"fa fa-hdd-o",title:"Disk Usage",content:(this.state.rpiVitals.disk_avail/this.state.rpiVitals.disk_total*100).toFixed(1)+"%"||"not found"}),r["default"].createElement(d["default"],{color:"bg-yellow",icon:"ion ion-ios-people-outline",title:"MEDLEMMER",content:""+this.state.members.length})),r["default"].createElement("div",{className:"row"},r["default"].createElement("div",{className:"col-md-6 col-sm-12"},r["default"].createElement("div",{className:"box box-info"},r["default"].createElement("div",{className:"box-header with-border"},r["default"].createElement("h3",{className:"box-title"},"Siste hendelser")),r["default"].createElement("div",{className:"box-body last-events"},r["default"].createElement("div",{className:"table-responsive"},r["default"].createElement("table",{className:"table no-margin"},r["default"].createElement("thead",null,r["default"].createElement("tr",null,r["default"].createElement("th",null,"Tidspunkt"),r["default"].createElement("th",null,"Hvem"),r["default"].createElement("th",null,"Hva"))),r["default"].createElement("tbody",null,this.state.events.map(function(e){return r["default"].createElement("tr",{key:e.id},r["default"].createElement("td",null,e.date.format("DD/MM HH:mm:ss")),r["default"].createElement("td",null,e.subject),r["default"].createElement("td",null,e.description))}))))),r["default"].createElement("div",{className:"box-footer clearfix"}))),r["default"].createElement("div",{className:"col-md-6 col-sm-12"},r["default"].createElement("div",{className:"box box-info"},r["default"].createElement("div",{className:"box-header with-border"},r["default"].createElement("h3",{className:"box-title"},"Medlemmer")),r["default"].createElement("div",{className:"box-body"},r["default"].createElement("div",{className:"table-responsive"},r["default"].createElement("table",{className:"table no-margin"},r["default"].createElement("thead",null,r["default"].createElement("tr",null,r["default"].createElement("th",null,"Navn"),r["default"].createElement("th",null,"MAC addresse"),r["default"].createElement("th",null,"Farge"),r["default"].createElement("th",null,"Rom"))),r["default"].createElement("tbody",null,this.state.members.map(function(e){return r["default"].createElement("tr",{key:e.id},r["default"].createElement("td",null,r["default"].createElement("i",{className:"fa fa-user member-status "+e.status}),e.name),r["default"].createElement("td",null,e.bluetooth_address),r["default"].createElement("td",null,e.color),r["default"].createElement("td",null,e.room))}))))),r["default"].createElement("div",{className:"box-footer clearfix"})))))),r["default"].createElement("footer",{className:"main-footer"},r["default"].createElement("strong",null,"Paradise Fantasy")))}}]),Dashboard}(l.Component);p.propTypes={auth:r["default"].PropTypes.instanceOf(c["default"]),router:r["default"].PropTypes.object},t["default"]=(0,u.withRouter)(p)},388:function(e,t,a){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(17),l=_interopRequireDefault(n),r=function(e){var t=e.color,a=e.icon,n=e.title,r=e.content;return l["default"].createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},l["default"].createElement("div",{className:"info-box"},l["default"].createElement("span",{className:"info-box-icon "+t},l["default"].createElement("i",{className:a})),l["default"].createElement("div",{className:"info-box-content"},l["default"].createElement("span",{className:"info-box-text"},n),l["default"].createElement("span",{className:"info-box-number"},r))))};r.propTypes={color:l["default"].PropTypes.string,icon:l["default"].PropTypes.string,title:l["default"].PropTypes.string,content:l["default"].PropTypes.string},t["default"]=r},389:function(e,t,a){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(17),l=_interopRequireDefault(n),r=a(243),u=_interopRequireDefault(r),o=function(e){var t=e.auth.login.bind(void 0);return l["default"].createElement("div",{className:"login-view full-width-height"},l["default"].createElement("div",null,l["default"].createElement("h1",null,"Velkommen til Paradise"),l["default"].createElement("button",{className:"btn btn-primary btn-lg",onClick:t},"Logg inn")))};o.propTypes={auth:l["default"].PropTypes.instanceOf(u["default"])},t["default"]=o}});
//# sourceMappingURL=app.c8fa5399aaf257685508.js.map